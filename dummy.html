<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <title>Blog</title>
</head>
<body>
    <section id="section-landing">
        <!-- Latest Blog Cards will be inserted here -->
        <h1>Hiiiiiiiii</h1>
    </section>

    <script>
        
        // Function to create a Bootstrap 4 card
        function createCard(title, subtitle, postMeta, href) {
            const card = document.createElement("div");
            card.classList.add("card", "mb-3");

            const cardBody = document.createElement("div");
            cardBody.classList.add("card-body");

            const cardTitle = document.createElement("h5");
            cardTitle.classList.add("card-title");
            cardTitle.textContent = title;

            const cardSubtitle = document.createElement("h6");
            cardSubtitle.classList.add("card-subtitle", "mb-2", "text-muted");
            cardSubtitle.textContent = subtitle;

            const cardText = document.createElement("p");
            cardText.classList.add("card-text");
            cardText.textContent = postMeta;

            const readMoreLink = document.createElement("a");
            readMoreLink.classList.add("btn", "btn-primary");
            readMoreLink.href = href;
            readMoreLink.textContent = "Read More";

            cardBody.appendChild(cardTitle);
            cardBody.appendChild(cardSubtitle);
            cardBody.appendChild(cardText);
            cardBody.appendChild(readMoreLink);

            card.appendChild(cardBody);

            return card;
        }

        // Fetch and display latest blogs
        const blogURL = "https://gardenguys.in/blog/";
        console.log(blogURL)
        const sectionLanding = document.getElementById("section-landing");

        fetch(blogURL, { mode: "no-cors" })
            .then(response => response.text())
            .then(data => {
                console.log("data is ", data)
                const parser = new DOMParser();
                const blogDoc = parser.parseFromString(data, "text/html");
                const latestBlogs = blogDoc.querySelectorAll(".post-title");
                console.log("latestBlogs ", latestBlogs);
                const cardsContainer = document.createElement("div");


                latestBlogs.forEach(blog => {
                    console.log("blog is  ", blog);
                    const title = blog.querySelector(".post-title").textContent;
                    console.log("title is  ", title);
                    const subtitle = blog.querySelector(".post-subtitle").textContent;
                    const postMeta = blog.nextElementSibling.textContent;
                    const href = blog.getAttribute("href");

                    console.log("title is ", title);

                    const card = createCard(title, subtitle, postMeta, href);
                    cardsContainer.appendChild(card);
                });

                sectionLanding.innerHTML = ""; // Clear any initial content
                sectionLanding.appendChild(cardsContainer);
            })
            .catch(error => console.error("Error fetching blogs:", error));
    </script>
</body>
</html>
